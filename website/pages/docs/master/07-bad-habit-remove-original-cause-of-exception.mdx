---
title: 07. æ‚ªã„ç¿’æ…£ ğŸ˜ˆ æ ¹æœ¬ä¾‹å¤–ã‚’æ¨ã¦ã‚‹
section: 06.ãƒã‚¹ã‚¿ç·¨
slug: /master/07-bad-habit-remove-original-cause-of-exception
order: 7
---

# 07. æ‚ªã„ç¿’æ…£ ğŸ˜ˆ æ ¹æœ¬ä¾‹å¤–ã‚’æ¨ã¦ã‚‹

<p className="goal">æ ¹æœ¬ä¾‹å¤–ã‚’æ¨ã¦ã¦ã—ã¾ã†ã¨ã€ã‚¨ãƒ©ãƒ¼åŸå› ãŒè¿½ã„ã«ãããªã‚‹ã“ã¨ã‚’çŸ¥ã‚‹</p>

## å­¦ç¿’

### ã€Œæ ¹æœ¬ä¾‹å¤–ã‚’æ¨ã¦ã‚‹ã€ã¨ã¯ã©ã†ã„ã†ã“ã¨ã‹ï¼Ÿ

ã€Œæ ¹æœ¬ä¾‹å¤–ã‚’æ¨ã¦ã‚‹ã€ã¨ã¯ã€ã‚­ãƒ£ãƒƒãƒã—ãŸä¾‹å¤–ã‚’åˆ¥ã®ä¾‹å¤–ã«å¤‰æ›ã—ã¦ä¸Šä½ã«ã‚¹ãƒ­ãƒ¼ã—ã¦ã—ã¾ã†è¡Œç‚ºã®ã“ã¨ã§ã™ã€‚

```java
try {
    myService.execute();

} catch (IllegalArgumentException e) {
    throw new MySystemException();
}
```

ã“ã‚Œã‚’ã‚„ã‚‹ã¨æ ¹æœ¬åŸå› ã¨ãªã‚‹ Exception ãŒãƒ­ã‚°ã«è¡¨ç¤ºã•ã‚Œãªã„ã®ã§ã€ã“ã‚Œä»¥ä¸Šå…ˆã«ã‚¨ãƒ©ãƒ¼åŸå› ãŒè¿½ãˆãªããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚

## å®Ÿæ¥­å‹™ã§ã‚ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³

å®Ÿæ¥­å‹™ã‚’æƒ³å®šã—ãŸå ´åˆã€ä¾‹å¤–ã‚’åˆ¥ã®ä¾‹å¤–ã§ãƒ©ãƒƒãƒ—ã—ãŸããªã‚‹ã®ã¯ã€æ¬¡ã®ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã§ã™ã€‚

ã‚ãªãŸã®ãƒãƒ¼ãƒ ã¯ã€ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã¨çµ±ä¸€ã•ã‚ŒãŸå‡¦ç†ã‚’å‚™ãˆãŸ [è‡ªä½œä¾‹å¤–](./04-custom-business-exception) ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«æ±ºã‚ã¾ã—ãŸã€‚
åŸå› ã‚’å–ã‚Šé™¤ã‘ãªã„é™ã‚Šã€ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ã—ã‹ã—ã€ã“ã®éš›ã«æ ¹æœ¬ä¾‹å¤–ã‚’æ¨ã¦ã¦ã—ã¾ã†ã¨ã€ä¸å…·åˆãŒèµ·ããŸæ™‚ã®åŸå› èª¿æŸ»ãŒé›£ã—ããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚

ãã†ãªã‚‰ãªã„ãŸã‚ã«ã¯ã€æ¬¡ã®ç‚¹ã«æ³¨æ„ã—ã¦å®Ÿè£…ã—ã¾ã™ã€‚

## è‡ªä½œä¾‹å¤–ã‚’ä½œã‚‹æ™‚ã®æ³¨æ„ç‚¹

æ–°ã—ã„ä¾‹å¤–ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã™ã‚‹ã¨ãã¯ã€å¸¸ã«ã‚­ãƒ£ãƒƒãƒã•ã‚ŒãŸä¾‹å¤–ã‚’ãã®åŸå› ã¨ã—ã¦è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãã†ã—ãªã„ã¨ã€ä¾‹å¤–ã®åŸå› ã¨ãªã£ãŸä¾‹å¤–ã‚¤ãƒ™ãƒ³ãƒˆã‚’èª¬æ˜ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ãŒå¤±ã‚ã‚Œã¾ã™ã€‚
ä¾‹å¤–ã‚¯ãƒ©ã‚¹ã¨ãã®ã™ã¹ã¦ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã¯ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦å…ƒã®ä¾‹å¤–ã‚’å—ã‘å…¥ã‚Œã€
åŸå› ã¨ã—ã¦ãã‚Œã‚’è¨­å®šã—ã€ã„ãã¤ã‹ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æä¾›ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```java
try {
    myService.execute();

} catch (NumberFormatException e) {
    throw new MyBusinessException(e, ErrorCode.CONFIGURATION_ERROR);

} catch (IllegalArgumentException e) {
    throw new MyBusinessException(e, ErrorCode.UNEXPECTED);

}
```

## ç·´ç¿’å•é¡Œï¼ˆæ™‚é–“: 30 åˆ†ï¼‰

æ¬¡ã® 4 ã¤ã®ã‚¯ãƒ©ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹ BirdWatching ã‚¯ãƒ©ã‚¹ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€å®Ÿè¡Œçµæœã®é€šã‚Šã«ãªã‚‹ã‚ˆã†ã€
æ ¹æœ¬ä¾‹å¤–ã‚’æ¨ã¦ãªã„æ–¹æ³•ã« Bird æŠ½è±¡ã‚¯ãƒ©ã‚¹ã¨å®Ÿè¡Œã‚¯ãƒ©ã‚¹ BirdWatching ã‚’ä¿®æ­£ã—ãªã•ã„

ã¾ãŸã€æ ¹æœ¬ä¾‹å¤–ã‚’æ¨ã¦ãšã«å†ã‚¹ãƒ­ãƒ¼ã™ã‚‹éš›ã«ã¯ã€è‡ªä½œä¾‹å¤–ã® AppException ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã€
æ ¹æœ¬ä¾‹å¤–ã®ãƒ©ãƒƒãƒ—æ–¹æ³•ã«åˆã‚ã›ã¦ã€Logger ã‚¯ãƒ©ã‚¹ã‚‚ä¿®æ­£ã—ãªã•ã„

1. Bird.java
2. Eagle.java
3. Pigeon.java
4. Logger.java

### BirdWatching.java

```java
package master.original.excep;

import static master.original.excep.util.Logger.LogType.ERROR;

import master.original.excep.entity.Eagle;
import master.original.excep.entity.Pigeon;
import master.original.excep.entity.base.Bird;
import master.original.excep.util.Logger;

public class BirdWatching {

    public static void main(String[] args) {

        boolean isNeedToValidPigeon = true;
        boolean isNeedToConvertToPigeon = false;

        BirdWatching app = new BirdWatching();
        app.execute(
                isNeedToValidPigeon,
                isNeedToConvertToPigeon);
        System.out.println();

        isNeedToValidPigeon = false;
        isNeedToConvertToPigeon = true;
        app.execute(
                isNeedToValidPigeon,
                isNeedToConvertToPigeon);
        System.out.println();

        isNeedToConvertToPigeon = false;
        app.execute(
                isNeedToValidPigeon,
                isNeedToConvertToPigeon);
    }

    private void execute(
            boolean isNeedToValidPigeon,
            boolean isNeedToConvertToPigeon) {

        Bird eagle = new Eagle("ã‚ªã‚¸ãƒ­ãƒ¯ã‚·");
        Bird pigeon = new Pigeon(null);

        try {
            eagle.fly();
            if (isNeedToValidPigeon) {
                pigeon.fly();
                pigeon.isEmptyName();
            }
            if (isNeedToConvertToPigeon) {
                Bird convertedPigeon = Bird.convertToPigeon(eagle);
                convertedPigeon.fly();
            }
        } catch (Exception e) {
            // e.printStackTrace();
            Logger.log(ERROR, e);
        }
    }
}
```

### 1. Bird.java

```java
package master.original.excep.entity.base;

import master.original.excep.entity.Pigeon;

public abstract class Bird {

    protected String className;
    protected String name;

    protected Bird(String name) {
        this.name = name;
        this.className = "Bird";
    }

    public boolean isEmptyName() throws Exception {

        boolean isEmptyName = false;
        try {
            isEmptyName = this.name.equals("");

        } catch (NullPointerException e) {
            throw new Exception();
        }

        return isEmptyName;
    }

    public void fly() {
        System.out.format(
                "[%s] %s ãŒé£›ã‚“ã . %n",
                this.className, this.name);
    }

    public static Pigeon convertToPigeon(Bird bird) throws Exception {

        Pigeon pigeon;
        try {
            pigeon = (Pigeon) bird;

        } catch (ClassCastException e) {
            throw new Exception();
        }
        return pigeon;
    }
}
```

### 2. Eagle.java

```java
package master.original.excep.entity;

import master.original.excep.entity.base.Bird;

public class Eagle extends Bird {

    public Eagle(String name) {
        super(name);
        this.className = "Eagle";
    }
}
```

### 3. Pigeon.java

```java
package master.original.excep.entity;

import master.original.excep.entity.base.Bird;

public class Pigeon extends Bird {

    public Pigeon(String name) {
        super(name);
        this.className = "Pigeon";
    }
}
```

### 4. Logger.java

```java
package master.original.excep.util;

public class Logger {

    public enum LogType {
        DEBUG("DEBUG"),
        INFO("INFO"),
        WARN("WARN"),
        ERROR("ERROR"),;

        private String name;

        private LogType(String name) {
            this.name = name;
        }

        private String getName() {
            return this.name;
        }
    }

    public static void log(LogType type, String message) {

        System.out.format(
                ":: [%s] %s %n", type.getName(), message);
    }

    public static void log(LogType type, Exception e) {
        log(type, e.getClass().getName());
        for (StackTraceElement element : e.getStackTrace()) {
            log(type, "  at " + element.toString());
        }
    }
}
```

### ä¿®æ­£å‰ã® BirdWatching.java ã®å®Ÿè¡Œçµæœ

```console
[Eagle] ã‚ªã‚¸ãƒ­ãƒ¯ã‚· ãŒé£›ã‚“ã .
[Pigeon] null ãŒé£›ã‚“ã .
:: [ERROR] java.lang.Exception
:: [ERROR]   at master.original.excep.entity.base.Bird.isEmptyName(Bird.java:23)
:: [ERROR]   at master.original.excep.BirdWatching.execute(BirdWatching.java:48)
:: [ERROR]   at master.original.excep.BirdWatching.main(BirdWatching.java:19)

[Eagle] ã‚ªã‚¸ãƒ­ãƒ¯ã‚· ãŒé£›ã‚“ã .
:: [ERROR] java.lang.Exception
:: [ERROR]   at master.original.excep.entity.base.Bird.convertToPigeon(Bird.java:41)
:: [ERROR]   at master.original.excep.BirdWatching.execute(BirdWatching.java:51)
:: [ERROR]   at master.original.excep.BirdWatching.main(BirdWatching.java:26)

[Eagle] ã‚ªã‚¸ãƒ­ãƒ¯ã‚· ãŒé£›ã‚“ã .
```

### ä¿®æ­£å¾Œã® BirdWatching.java ã®å®Ÿè¡Œçµæœ

```console
[Eagle] ã‚ªã‚¸ãƒ­ãƒ¯ã‚· ãŒé£›ã‚“ã .
[Pigeon] null ãŒé£›ã‚“ã .
:: [ERROR] UnecpectedError: æƒ³å®šå¤–ã®å€¤ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™.
:: [ERROR] master.original.excep.exception.AppException
:: [ERROR] java.lang.NullPointerException
:: [ERROR]   at master.original.excep.entity.base.Bird.isEmptyName(Bird.java:24)
:: [ERROR]   at master.original.excep.BirdWatching.execute(BirdWatching.java:48)
:: [ERROR]   at master.original.excep.BirdWatching.main(BirdWatching.java:19)

[Eagle] ã‚ªã‚¸ãƒ­ãƒ¯ã‚· ãŒé£›ã‚“ã .
:: [ERROR] IncorrectHandlingError: é–“é•ã£ãŸå‡¦ç†ãŒè¡Œã‚ã‚Œã¾ã—ãŸ.
:: [ERROR] master.original.excep.exception.AppException
:: [ERROR] java.lang.ClassCastException
:: [ERROR]   at master.original.excep.entity.base.Bird.convertToPigeon(Bird.java:43)
:: [ERROR]   at master.original.excep.BirdWatching.execute(BirdWatching.java:51)
:: [ERROR]   at master.original.excep.BirdWatching.main(BirdWatching.java:26)

[Eagle] ã‚ªã‚¸ãƒ­ãƒ¯ã‚· ãŒé£›ã‚“ã .
```

## è§£ç­”ä¾‹

https://github.com/fs5013-furi-sutao/java-bootcamp-answers/blob/main/06.master/06-bad-habit-is-swallowing-exception/src/master/original/excep
