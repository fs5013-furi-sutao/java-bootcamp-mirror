---
title: 06. æ‚ªã„ç¿’æ…£ ğŸ˜ˆ ä¾‹å¤–ã®æ¡ã‚Šã¤ã¶ã—
section: 06.ãƒã‚¹ã‚¿ç·¨
slug: /master/06-bad-habit-is-swallowing-exception
order: 6
---

# 06. æ‚ªã„ç¿’æ…£ ğŸ˜ˆ ä¾‹å¤–ã®æ¡ã‚Šã¤ã¶ã—

<p class="goal">
  ä¾‹å¤–ã®æ¡ã‚Šã¤ã¶ã—ã‚’å®Ÿè£…ã—ã¦ã—ã¾ã†ã¨ã€ã©ã‚Œã ã‘å±é™ºã‹ã‚’å®Ÿæ„Ÿã§ãã‚‹ã“ã¨
</p>

## å­¦ç¿’

### ä¾‹å¤–ã‚’æ¡ã‚Šã¤ã¶ã™ã¨ã¯ã©ã†ã„ã†ã“ã¨ã‹ã‚’èªè­˜ã™ã‚‹

Java ã®ä¾‹å¤–ã‚’æ¡ã‚Šã¤ã¶ã™ã¨ã¯ã©ã†ã„ã†ã“ã¨ã‹ã‚’ Web ã§èª¿ã¹ã¦ãã ã•ã„ã€‚
æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯ã€ã€Œ [java ä¾‹å¤– æ¡ã‚Šã¤ã¶ã—](https://www.google.com/search?q=java+ä¾‹å¤–+æ¡ã‚Šã¤ã¶ã—) ã€ã§ã™ã€‚
3 ç¨®é¡ãã‚‰ã„èª¬æ˜è¨˜äº‹ã‚„ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ã€ä¾‹å¤–ã‚’æ¡ã‚Šã¤ã¶ã™ã“ã¨ã®å±é™ºæ€§ã‚’æŠ¼ã•ãˆã¦ãŠãã¾ã—ã‚‡ã†ã€‚

### ä¾‹å¤–ã®æ¡ã‚Šã¤ã¶ã—ã¨ã¯

ä¾‹å¤–ã®æ¡ã‚Šã¤ã¶ã—ã¯ã€Exception swallowing ã¨ã‚‚å‘¼ã°ã‚Œã¾ã™ã€‚

ä¾‹å¤–ã®æ¡ã‚Šã¤ã¶ã—ãŒä½•ã‹ã‚’çŸ¥ã‚‹ã«ã¯ã€ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹ã®ãŒæ—©ã„ã§ã™ã€‚

```java
String target = "æ•°å­—ã§ã¯ãªã„";
try {
    int targetInt = Integer.parseInt(target);

} catch (NumberFormatException e) {
    // ä½•ã‚‚ã—ãªã„
}
```

ä¸Šè¨˜ã®å‡¦ç†ã‚ˆã†ã«ã€ã€Œä¾‹å¤–ã‚’ catch ã™ã‚‹ã‘ã©ãã®ä¸­ã§ã¯ä½•ã‚‚ã—ãªã„ã€ã“ã¨ã‚’æŒ‡ã—ã¦ã€Œæ¡ã‚Šã¤ã¶ã™ã€ã¨å‘¼ã³ã¾ã™ã€‚
ã“ã‚Œã¯ã€ãã‚‚ãã‚‚ try-catch ã‚’æ›¸ã‹ãªã„ã®ã¨ã¯å…¨ãé•ã†è¡Œç‚ºã§ã™ã€‚

ä¸Šè¨˜ã®å‡¦ç†ã®å®Ÿè¡Œçµæœã¯ã€æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
ã¤ã¾ã‚Šã€ä½•ã‚‚èµ·ãã¾ã›ã‚“ã€‚

```console

```

## éš è”½ã‚¨ãƒ©ãƒ¼

ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã›ãšä½•ã‚‚èµ·ããªã„ã®ãŒä½•ãŒæ‚ªã„ã®ã‹ï¼Ÿ
ãã‚Œã¯ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸã®ã«ã€é–‹ç™ºè€…ãŒä½•ã‚‚æŠŠæ¡ã§ããªã„ã¨ã„ã†çŠ¶æ…‹ã“ããŒå¤§å•é¡Œãªã®ã§ã™ã€‚

ã“ã®ä¾‹å¤–ãŒéš ã•ã‚Œã¦ã—ã¾ã†äº‹è±¡ã®ã“ã¨ã‚’ã€ã‚¨ãƒ©ãƒ¼éš è”½ï¼ˆError hidingï¼‰ã¨å‘¼ã³ã¾ã™ã€‚

ä¾‹å¤–ãŒæ¡ã‚Šã¤ã¶ã•ã‚Œã¦ã—ã¾ã†ã¨ã€ãƒã‚°ã®åŸå› è¿½åŠã‚’é›£ã—ãã—ã€
ã‚·ã‚¹ãƒ†ãƒ ã«å–ã£ã¦è‡´å‘½çš„ãªã‚¨ãƒ©ãƒ¼ï¼ˆCritical errorï¼‰ã‚’çŸ¥ã‚‰ãªã„ã†ã¡ã«åŸ‹ã‚è¾¼ã‚“ã§ã—ã¾ã„ã¾ã™ã€‚

ãã®ãŸã‚ã€ã“ã†ã—ãŸç®‡æ‰€ã¯ã€Œã‚¢ãƒ—ãƒªã®ã‚µã‚¤ãƒ¬ãƒ³ãƒˆã‚­ãƒ©ãƒ¼ã€ã¨è¡¨ç¾ã•ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚

ä¾‹å¤–ã¯å‡¦ç†å®Ÿè¡Œæ™‚ã«ç™ºç”Ÿã—ãŸå•é¡Œã‚’ç¤ºã—ã¦ãã‚Œã¾ã™ã€‚
ä¾‹å¤–ã‚’ç„¡è¦–ã‚„ç ´æ£„ã‚’ã—ã¦ã—ã¾ã†ã¨ã€ä¸æ­£ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚„ãƒ‡ãƒ¼ã‚¿ãªã©ã‚’æ¤œå‡ºã™ã‚‹æ©Ÿä¼šã‚’å¤±ã£ã¦ã—ã¾ã†ã¨ã‚‚ã«ã€
ä¸æ­£ãªçŠ¶æ…‹ã®ã¾ã¾ã‚·ã‚¹ãƒ†ãƒ ãŒå‹•ãç¶šã‘ã¦ã—ã¾ã„ã€äºŒæ¬¡éšœå®³ã«ã‚‚ã¤ãªãŒã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ä¾‹å¤–ã‚’ã‚­ãƒ£ãƒƒãƒã—ãŸã«ã‚‚é–¢ã‚ã‚‰ãšã€ç„¡è¦–ãƒ»ç ´æ£„ã—ã¦ã—ã¾ã†ã¯çµ¶å¯¾ã«ãƒ€ãƒ¡ã€‚
ã‚‚ã—ãã‚“ãªã‚³ãƒ¼ãƒ‰ã‚’å…ˆè¼©ã«è¦‹ã¤ã‘ã‚‰ã‚ŒãŸã‚‰ã€æ­£åº§ã§èª¬æ•™ã¯å…ã‚Œã‚‰ã‚Œãªã„ã§ã—ã‚‡ã†ã€‚

æ¯”è¼ƒã¨ã—ã¦ã€ä¸Šè¨˜ã®ä¾‹å¤–ã«å¯¾ã—ã¦ try-catch ã‚’æ›¸ã‹ãªã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã¾ã™ã€‚

```java
String target = "This is not a number.";
int targetInt = Integer.parseInt(target);
```

ã“ã®å‡¦ç†ã®å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```java
Exception in thread "main" java.lang.NumberFormatException: For input string: "æ•°å­—ã§ã¯ãªã„"
        at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
        at java.base/java.lang.Integer.parseInt(Integer.java:652)
        at java.base/java.lang.Integer.parseInt(Integer.java:770)
        at master.swallowing.excep.App.main(App.java:7)
```

### ã¾ã¨ã‚

ä¾‹å¤–ã®æ¡ã‚Šã¤ã¶ã—ã‚’è¡Œã†ã¨æ¬¡ã®ã“ã¨ãŒèµ·ã“ã‚Šã¾ã™ã€‚

- ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸã“ã¨ã‚’ã€èª°ã‚‚çŸ¥ã‚‹ã“ã¨ãŒã§ããªã„
- ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ãã®ã¾ã¾å®Ÿè¡Œã•ã‚Œç¶šã‘ã‚‹

ã“ã‚Œã«ã‚ˆã‚Šã€å•é¡Œèª¿æŸ»ãŒå›°é›£ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€ä¾‹å¤–ã®æ¡ã‚Šã¤ã¶ã—ã¯é¿ã‘ã‚‹ã¹ãã§ã™ã€‚

ç‰¹ã«æ¥­å‹™ã§è£½é€ ã™ã‚‹ã‚ˆã†ãªã‚¢ãƒ—ãƒªã‚„ã‚·ã‚¹ãƒ†ãƒ ã«ãŠã„ã¦ã¯ã€ä¾‹å¤–ã‚’ã‚­ãƒ£ãƒƒãƒã—ãŸç®‡æ‰€ã§ã€
ãƒ­ã‚°ã«ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’è¨˜éŒ²ã™ã‚‹å‡¦ç†ã‚’ã€å¿…ãšå®Ÿè£…ã—ã¾ã—ã‚‡ã†ã€‚

## ç·´ç¿’å•é¡Œï¼ˆæ™‚é–“: 20 åˆ†ï¼‰

æ¬¡ã® 4 ã¤ã®ã‚¯ãƒ©ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹ BirdWatching ã‚¯ãƒ©ã‚¹ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€å®Ÿè¡Œçµæœã®é€šã‚Šã«ãªã‚‹ã‚ˆã†ã«ã€
BirdWatching ã‚¯ãƒ©ã‚¹ã®è©²å½“å‡¦ç†ã‚’ã€ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸã“ã¨ãŒéš è”½ã•ã‚Œãªã„ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ãªã•ã„

1. Bird.java
2. Eagle.java
3. Pigeon.java
4. Logger.java

### BirdWatching.java

```java
package master.swallowing.excep;

import master.swallowing.excep.entity.Eagle;
import master.swallowing.excep.entity.Pigeon;
import master.swallowing.excep.entity.base.Bird;

public class BirdWatching {

    public static void main(String[] args) {

        boolean isNeedToValidPigeon = true;
        boolean isNeedToConvertToPigeon = false;

        BirdWatching app = new BirdWatching();
        app.execute(
                isNeedToValidPigeon,
                isNeedToConvertToPigeon);
        System.out.println();

        isNeedToValidPigeon = false;
        isNeedToConvertToPigeon = true;
        app.execute(
                isNeedToValidPigeon,
                isNeedToConvertToPigeon);
        System.out.println();

        isNeedToConvertToPigeon = false;
        app.execute(
                isNeedToValidPigeon,
                isNeedToConvertToPigeon);
    }

    private void execute(
            boolean isNeedToValidPigeon,
            boolean isNeedToConvertToPigeon) {

        Bird eagle = new Eagle("ã‚ªã‚¸ãƒ­ãƒ¯ã‚·");
        Bird pigeon = new Pigeon(null);

        try {
            eagle.fly();
            if (isNeedToValidPigeon) {
                pigeon.fly();
                pigeon.isEmptyName();
            }
            if (isNeedToConvertToPigeon) {
                Bird convertedPigeon = Bird.convertToPigeon(eagle);
                convertedPigeon.fly();
            }
        } catch (NullPointerException | ClassCastException e) {
            return;
        }
    }
}
```

### 1. Bird.java

```java
package master.swallowing.excep.entity.base;

import master.swallowing.excep.entity.Pigeon;

public abstract class Bird {

    protected String className;
    protected String name;

    protected Bird(String name) {
        this.name = name;
        this.className = "Bird";
    }

    public boolean isEmptyName() {
        return this.name.equals("");
    }

    public void fly() {
        System.out.format(
                "[%s] %s ãŒé£›ã‚“ã . %n",
                this.className, this.name);
    }

    public static Pigeon convertToPigeon(Bird bird) {
        return (Pigeon) bird;
    }
}
```

### 2. Eagle.java

```java
package master.swallowing.excep.entity;

import master.swallowing.excep.entity.base.Bird;

public class Eagle extends Bird {

    public Eagle(String name) {
        super(name);
        this.className = "Eagle";
    }
}
```

### 3. Pigeon.java

```java
package master.swallowing.excep.entity;

import master.swallowing.excep.entity.base.Bird;

public class Pigeon extends Bird {

    public Pigeon(String name) {
        super(name);
        this.className = "Pigeon";
    }
}
```

### 4. Logger.java

```java
package master.swallowing.excep.util;

public class Logger {

    public enum LogType {
        DEBUG("DEBUG"),
        INFO("INFO"),
        WARN("WARN"),
        ERROR("ERROR"),;

        private String name;

        private LogType(String name) {
            this.name = name;
        }

        private String getName() {
            return this.name;
        }
    }

    public static void log(LogType type, String message) {

        System.out.format(
                ":: [%s] %s %n", type.getName(), message);
    }

    public static void log(LogType type, Exception e) {

        log(type, e.getClass().getName());

        for (StackTraceElement element : e.getStackTrace()) {
            log(type, "  at " + element.toString());
        }
    }
}
```

### ä¿®æ­£å¾Œã® BirdWatching.java ã®å®Ÿè¡Œçµæœ

```console
[Eagle] ã‚ªã‚¸ãƒ­ãƒ¯ã‚· ãŒé£›ã‚“ã .
[Pigeon] null ãŒé£›ã‚“ã .
:: [ERROR] java.lang.NullPointerException
:: [ERROR]   at master.swallowing.excep.entity.base.Bird.isEmptyName(Bird.java:16)
:: [ERROR]   at master.swallowing.excep.BirdWatching.execute(BirdWatching.java:47)
:: [ERROR]   at master.swallowing.excep.BirdWatching.main(BirdWatching.java:18)

[Eagle] ã‚ªã‚¸ãƒ­ãƒ¯ã‚· ãŒé£›ã‚“ã .
:: [ERROR] java.lang.ClassCastException
:: [ERROR]   at master.swallowing.excep.entity.base.Bird.convertToPigeon(Bird.java:26)
:: [ERROR]   at master.swallowing.excep.BirdWatching.execute(BirdWatching.java:50)
:: [ERROR]   at master.swallowing.excep.BirdWatching.main(BirdWatching.java:25)

[Eagle] ã‚ªã‚¸ãƒ­ãƒ¯ã‚· ãŒé£›ã‚“ã .
```

## è§£ç­”ä¾‹

https://github.com/fs5013-furi-sutao/java-bootcamp-answers/blob/main/06.master/06-bad-habit-is-swallowing-exception/src/master/swallowing/excep
